üöÄ Project Name: WebhookProcessorWebhookProcessor is a secure, high-performance microservice designed to act as the single, reliable drop-off point for critical incoming message data delivered via webhooks. It handles fast ingestion, strict data validation, and persistent storage, ensuring zero downtime and complete message accountability.‚ú® Key FeaturesAsynchronous Performance: Built on FastAPI and utilizes multiple Gunicorn workers, enabling extremely fast, non-blocking ingestion and high concurrency necessary for handling bursts of webhook traffic.Secure Ingestion (HMAC): Enforces message authenticity by performing a cryptographic HMAC signature check on every incoming webhook against the X-Signature header, rejecting unauthorized or tampered payloads immediately.Data Integrity & Validation: Uses Pydantic models to rigorously validate and type-check every incoming JSON payload, ensuring only clean, structured data is passed to the database layer.Persistent Storage: Stores all message records in a SQLAlchemy/SQLite database, automatically creating the schema on startup for ease of development and deployment.Advanced Query API: Provides a flexible, RESTful /messages endpoint supporting chained filters for highly specific data retrieval:Time Filter: (since=)Text Search: (q=)Sender/Recipient: (from=, to=)Monitoring & Health Checks: Integrates Prometheus metrics via the /metrics endpoint and includes dedicated /health/ready and /health/live probes for seamless orchestration by platforms like Docker and Kubernetes.üíª Tech Stack & RequirementsCategoryTechnologyPurposeFrameworkFastAPIHigh-performance, async API development.ServerGunicorn & UvicornProduction-grade multi-process server management.DatabaseSQLAlchemy (ORM) & SQLiteORM for message storage.ValidationPydanticData validation and configuration management.Monitoringprometheus-clientExposes application metrics for external scraping.Environmentpython-dotenvLoads local configuration variables from a .env file.‚öôÔ∏è Getting Started (Local Setup)PrerequisitesPython 3.11+Docker (Recommended for development and deployment)1. Clone the RepositoryBashgit clone https://github.com/YourUsername/WebhookProcessor.git
cd WebhookProcessor
2. Set Up Environment VariablesCreate a file named .env in the project root to store configuration variables (secrets)..env# Database configuration for local SQLite file
DATABASE_URL="sqlite:///./data/app.db"

# Secret key used to verify incoming webhook signatures
# **IMPORTANT**: Use a strong, random string in production.
WEBHOOK_SECRET="your_strong_secret_key_here"

# Logging Level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL="DEBUG" 
3. Build and Run with Docker (Recommended)This method uses a volume mount to ensure your database file (app.db) persists on your host machine and is not lost when the container stops.Build the Image:Bashdocker build -t webhook-processor:latest .
Create Data Directory: (Needed if the directory doesn't already exist)Bashmkdir -p data
Run the Container (with Volume Mount):Bashdocker run -d --name webhook-processor -p 8000:8000 -v "$(pwd)/data:/data" webhook-processor:latest
The application is now running in the background and accessible on http://localhost:8000.üìö API EndpointsEndpointMethodDescription/webhookPOSTPrimary entry point for ingesting new messages. Requires HMAC signature./messagesGETRetrieves paginated and filtered list of stored messages./health/readyGETReadiness probe: checks if the service and database connection are functional./metricsGETExposes Prometheus metrics for application monitoring.Example QueryTo fetch messages sent by a specific number after a certain time:GET /messages?from=+14155550100&since=2025-11-20T10:00:00Z&limit=20
üîí Security (HMAC Signature)The /webhook endpoint relies on the sender to compute a HMAC-SHA256 signature and include it in the X-Signature header. The WebhookProcessor verifies this signature against its internal WEBHOOK_SECRET before processing the payload. This mechanism protects against spoofing and data tampering.
